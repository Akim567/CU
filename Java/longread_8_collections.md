## –í–≤–µ–¥–µ–Ω–∏–µ: Collections

–í —ç—Ç–æ–π –ª–µ–∫—Ü–∏–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –æ—Ç **Generics** (type safety, PECS, erasure) –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ `equals/hashCode` –∫ **Java Collections Framework (JCF)** ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π, —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –ø–∞–º—è—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –í —Ä–∞–º–∫–∞—Ö –∫—É—Ä—Å–∞ –º—ã –±—É–¥–µ–º —Ä–∞–∑–±–∏—Ä–∞—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏—é `Iterable ‚Üí Collection ‚Üí {List, Set, Queue}` –∏ –æ—Ç–¥–µ–ª—å–Ω–æ —Å—Ç–æ—è—â–∏–π `Map`, –∞ —Ç–∞–∫–∂–µ –∫–ª—é—á–µ–≤—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –∏—Ö –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π.

**–°–≤—è–∑—å —Å –ø—Ä–æ—à–ª—ã–º–∏ –ª–µ–∫—Ü–∏—è–º–∏.**  
‚Äî –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –≤—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å API –º—ã –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ–º —á–µ—Ä–µ–∑ **generics** (–≤—ã —É–∂–µ —Ä–∞–±–æ—Ç–∞–ª–∏ —Å wildcard‚Äô–∞–º–∏ –∏ bounded type parameters). –≠—Ç–æ –Ω–∞–ø—Ä—è–º—É—é –≤–ª–∏—è–µ—Ç –Ω–∞ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã –º–µ—Ç–æ–¥–æ–≤ –∫–æ–ª–ª–µ–∫—Ü–∏–π –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `Iterator`.  
‚Äî –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã **`equals`/`hashCode`** –∫—Ä–∏—Ç–∏—á–Ω—ã –¥–ª—è `HashMap`/`HashSet`: –Ω–∞—Ä—É—à–µ–Ω–∏–µ —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ—Å—Ç–∏/—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ –ª–æ–º–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –ø–æ–∏—Å–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤. –ö —ç—Ç–∏–º –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º –º—ã –≤–µ—Ä–Ω—ë–º—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º –ø—É–Ω–∫—Ç–µ –ª–µ–∫—Ü–∏–∏.  
‚Äî –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏–∑ –ø—Ä–æ—à–ª–æ–π –ª–µ–∫—Ü–∏–∏ –ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è **fail-fast** –ø–æ–≤–µ–¥–µ–Ω–∏—è –∏—Ç–µ—Ä–∞—Ç–æ—Ä–æ–≤ (`ConcurrentModificationException`) –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π.

**–¶–µ–ª–∏ —Ä–∞–∑–¥–µ–ª–∞ ¬´Collections¬ª:**
1) –ü–æ–Ω—è—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É JCF –∏ —Ä–æ–ª—å –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤ (`AbstractCollection`, `AbstractList`, `AbstractSet`, `AbstractQueue`, `AbstractMap`).
2) –ù–∞—É—á–∏—Ç—å—Å—è –≤—ã–±–∏—Ä–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å –æ–ø–µ—Ä–∞—Ü–∏–π: random access, –≤—Å—Ç–∞–≤–∫–∏/—É–¥–∞–ª–µ–Ω–∏—è, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ—Ä—è–¥–∫–∞/—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏, FIFO/LIFO/priority. (–ë—É–¥–µ–º –æ–ø–∏—Ä–∞—Ç—å—Å—è –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –ø–æ `ArrayList`, `LinkedList`, `ArrayDeque`, `PriorityQueue`, `HashMap`/`LinkedHashMap`/`TreeMap`.)
3) –û—Å–≤–æ–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—É—é –∏—Ç–µ—Ä–∞—Ü–∏—é –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—é –∫–æ–ª–ª–µ–∫—Ü–∏–π (–∏—Ç–µ—Ä–∞—Ç–æ—Ä—ã, `modCount`, fail-fast), –∞ —Ç–∞–∫–∂–µ —Ä–∞–±–æ—Ç—É —Å **immutable** –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏ (`List.of/Set.of/Map.of`).

---

## 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Java Collections Framework

**–ò–µ—Ä–∞—Ä—Ö–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤.**  
Java Collections Framework —Å—Ç—Ä–æ–∏—Ç—Å—è –≤–æ–∫—Ä—É–≥ –∏–µ—Ä–∞—Ä—Ö–∏–∏ `Iterable ‚Üí Collection ‚Üí {List, Set, Queue}` –∏ –æ—Ç–¥–µ–ª—å–Ω–æ —Å—Ç–æ—è—â–µ–≥–æ `Map`, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ Collection –∏ Iterable.

![collections.png](assets/collections.png)

**–ë–∞–∑–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Collection`.**  
–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ç–æ–¥—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞, –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—É—Å—Ç–æ—Ç—ã/–ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –∏ –º–µ—Ç–æ–¥—ã –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤ –º–∞—Å—Å–∏–≤. –≠—Ç–æ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –¥–ª—è `List/Set/Queue`:
```java
public interface Collection<E> extends Iterable<E> {
    int size();

    boolean isEmpty();

    boolean contains(Object o);

    boolean containsAll(Collection<?> c);

    Object[] toArray();

    <T> T[] toArray(T[] a);

    boolean add(E e);

    boolean addAll(Collection<? extends E> c);

    boolean remove(Object o);

    boolean removeAll(Collection<?> c);

    boolean retainAll(Collection<?> c);

    void clear();
}
```
–ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ `Collection` –∑–∞–¥–∞–Ω–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π –∏ –ø–µ—Ä–µ—á–µ–Ω—å –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö/–Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤; ‚Äú–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ‚Äù –º–µ—Ç–æ–¥—ã –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –±—Ä–æ—Å–∞—Ç—å `UnsupportedOperationException`.

**–ó–∞—á–µ–º `Map` –≤—ã–Ω–µ—Å–µ–Ω –æ—Ç–¥–µ–ª—å–Ω–æ.**  
`Map` ‚Äî —ç—Ç–æ –∞—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω—ã–π –º–∞—Å—Å–∏–≤ –ø–∞—Ä ¬´–∫–ª—é—á ‚Üí –∑–Ω–∞—á–µ–Ω–∏–µ¬ª, –æ–Ω **–Ω–µ** –ø–æ–¥—Ç–∏–ø `Collection`, –ø–æ—Ç–æ–º—É —á—Ç–æ —É –Ω–µ–≥–æ –¥—Ä—É–≥–∞—è –º–æ–¥–µ–ª—å —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (–ø–∞—Ä—ã `Map.Entry<K,V>`), –¥—Ä—É–≥–æ–π –Ω–∞–±–æ—Ä –æ–ø–µ—Ä–∞—Ü–∏–π (`get/put/remove`, `entrySet/keySet/values`) –∏ –∏–Ω—ã–µ –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã (—É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∫–ª—é—á–µ–π).

**–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –∫–ª–∞—Å—Å—ã.**  
`AbstractCollection`, `AbstractList`, `AbstractSet`, `AbstractQueue`, `AbstractMap` ‚Äî –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –∫–ª–∞—Å—Å—ã –¥–ª—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∫–æ–ª–ª–µ–∫—Ü–∏–π. –û–Ω–∏ —É–∂–µ —Ä–µ–∞–ª–∏–∑—É—é—Ç —Ç–∏–ø–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã –∏ –æ—Å—Ç–∞–≤–ª—è—é—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –¥–ª—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è. –≠—Ç–æ —Å–æ–∫—Ä–∞—â–∞–µ—Ç –æ–±—ä—ë–º –∫–æ–¥–∞ –∏ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ: —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤, –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ (fail-fast) –∏—Ç–µ—Ä–∞—Ç–æ—Ä—ã –∏ `UnsupportedOperationException` –¥–ª—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤.
---

<details>
  <summary>üìí –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∏</summary>
  <p>1) –ü–æ—á–µ–º—É <code>Map</code> –Ω–µ –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç <code>Collection</code> –∏ –∫–∞–∫ —ç—Ç–æ –æ—Ç—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ –Ω–∞–±–æ—Ä–µ –æ–ø–µ—Ä–∞—Ü–∏–π? –ü—Ä–∏–≤–µ–¥–∏—Ç–µ –ø—Ä–∏–º–µ—Ä —Å <code>entrySet/keySet/values</code>.</p>
  <p>2) –ö–∞–∫–∏–µ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ –∑–∞–¥–∞—ë—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç <code>Collection</code>? –ö–∞–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –º–æ–≥—É—Ç –±—ã—Ç—å ¬´–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏¬ª –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏?</p>
  <p>3) –ö–∞–∫—É—é —Ä–æ–ª—å –∏–≥—Ä–∞—é—Ç –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –∫–ª–∞—Å—Å—ã –∏ –∫–∞–∫–∏–µ –ø–ª—é—Å—ã –æ–Ω–∏ –¥–∞—é—Ç –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏?</p>
</details>

## 2. –°–µ–º–µ–π—Å—Ç–≤–æ List: –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

![lists.png](assets/lists.png)

### –ö–æ–Ω—Ç—Ä–∞–∫—Ç `List`
`List` ‚Äî —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏, –¥–æ–ø—É—Å–∫–∞–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã. –ë–∞–∑–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏: –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø, –∑–∞–º–µ–Ω–∞ —ç–ª–µ–º–µ–Ω—Ç–∞, –ø–æ–∏—Å–∫ –∏–Ω–¥–µ–∫—Å–∞ –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ —á–µ—Ä–µ–∑ `subList`.
```java
public interface List<E> extends Collection<E> {
    E get(int index);
    E set(int index, E element);
    int indexOf(Object o);
    List<E> subList(int fromIndex, int toIndex);
}
```

### –ò–µ—Ä–∞—Ä—Ö–∏—è –∏ –±–∞–∑–æ–≤—ã–µ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏
–î–ª—è `List` –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω—ã –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –∫–ª–∞—Å—Å—ã: `AbstractList` –∏ `AbstractSequentialList` ‚Äî –æ–Ω–∏ –∑–∞–¥–∞—é—Ç ¬´–∫–∞—Ä–∫–∞—Å¬ª —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏. –í –∏–µ—Ä–∞—Ä—Ö–∏–∏ —Ä—è–¥–æ–º ‚Äî `ArrayList` –∏ `LinkedList` –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

### `ArrayList`: –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –º–∞—Å—Å–∏–≤

- **–•—Ä–∞–Ω–µ–Ω–∏–µ.**  
  –≠–ª–µ–º–µ–Ω—Ç—ã –ª–µ–∂–∞—Ç –≤ –º–∞—Å—Å–∏–≤–µ `Object[] elementData`. –ú–∞—Å—Å–∏–≤ elementData —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å –∑–∞–ø–∞—Å–æ–º –ø–æ —Ä–∞–∑–º–µ—Ä—É, —á—Ç–æ–±—ã –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å –∫–∞–∂–¥—ã–π —Ä–∞–∑ –≤—ã–¥–µ–ª—è—Ç—å –Ω–æ–≤—É—é –ø–∞–º—è—Ç—å –∏ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ. –§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ ‚Äî –≤ –ø–æ–ª–µ `int size`.
  `0 ‚â§ size ‚â§ elementData.length` (–≥–¥–µ `elementData.length` ‚Äî —Ç–µ–∫—É—â–∞—è **capacity**).

- **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.**  
  –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –±–µ–∑ `initialCapacity` –Ω–µ –≤—ã–¥–µ–ª—è–µ—Ç –º–∞—Å—Å–∏–≤ —Å—Ä–∞–∑—É (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–±—â–∏–π –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤).  
  –ü—Ä–∏ **–ø–µ—Ä–≤–æ–π –≤—Å—Ç–∞–≤–∫–µ** —Å–æ–∑–¥–∞—ë—Ç—Å—è –º–∞—Å—Å–∏–≤ –Ω–∞ **10** —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (–¥–µ—Ñ–æ–ª—Ç–Ω–∞—è capacity). `DEFAULT_CAPACITY = 10`

- **–ú–µ—Ö–∞–Ω–∏–∑–º —Ä–æ—Å—Ç–∞.**  
  –ö–æ–≥–¥–∞ `size == capacity`, –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `grow(minCapacity)`:
    - –ù–æ–≤–∞—è —ë–º–∫–æ—Å—Ç—å —Å—á–∏—Ç–∞–µ—Ç—Å—è –∫–∞–∫ ~**1.5√ó** –æ—Ç —Å—Ç–∞—Ä–æ–π: `old + (old >> 1)`.
    - –ó–∞—Ç–µ–º –±–µ—Ä—ë—Ç—Å—è –º–∞–∫—Å–∏–º—É–º –∏–∑ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –∏ `minCapacity`.
    - –î–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–Ω–æ—Å—è—Ç—Å—è `Arrays.copyOf(elementData, newCapacity)`.

- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —ë–º–∫–æ—Å—Ç–∏ (–ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ).**  
  –ü—Ä–∏ —Ä–∞—Å—á—ë—Ç–µ –Ω–æ–≤–æ–π —ë–º–∫–æ—Å—Ç–∏ `ArrayList` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—ã—Ö–æ–¥ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã `int` –∏ –≤–µ—Ä—Ö–Ω—é—é –≥—Ä–∞–Ω–∏—Ü—É —Ä–∞–∑–º–µ—Ä–∞ –º–∞—Å—Å–∏–≤–æ–≤ –≤ JVM.
  –ï—Å–ª–∏ —Ç—Ä–µ–±—É–µ–º—ã–π —Ä–∞–∑–º–µ—Ä –ø—Ä–µ–≤—ã—à–∞–µ—Ç ¬´–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –º–∞—Å—Å–∏–≤–∞¬ª (~`Integer.MAX_VALUE - 8`), –±–µ—Ä—ë—Ç—Å—è –≤–µ—Ä—Ö–Ω—è—è –ø–ª–∞–Ω–∫–∞:
  –ª–∏–±–æ `MAX_ARRAY_SIZE` (`Integer.MAX_VALUE - 8`), –ª–∏–±–æ ‚Äî –µ—Å–ª–∏ `minCapacity` –µ—â—ë –±–æ–ª—å—à–µ ‚Äî `Integer.MAX_VALUE`.
  –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ —Å–±–æ–∏ –ø—Ä–∏ `Arrays.copyOf(...)`.

- **–°–º–µ—â–µ–Ω–∏—è –ø—Ä–∏ –≤—Å—Ç–∞–≤–∫–∞—Ö/—É–¥–∞–ª–µ–Ω–∏—è—Ö –≤–Ω—É—Ç—Ä–∏ —Å–ø–∏—Å–∫–∞.**
    - –ø—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ —ç–ª–µ–º–µ–Ω—Ç–∞(–æ–≤) –≤ —Å–µ—Ä–µ–¥–∏–Ω—É (`add(int, E)`/ `addAll(int, Collection<? extends E>`), –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ –∏–Ω–¥–µ–∫—Å—É `i`, —ç–ª–µ–º–µ–Ω—Ç—ã [i, size] —Å–¥–≤–∏–≥–∞—é—Ç—Å—è –≤–ø—Ä–∞–≤–æ —Å –ø–æ–º–æ—â—å—é `System.arraycopy`
    - –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —ç–ª–µ–º–µ–Ω—Ç–∞ –∏–∑ —Å–µ—Ä–µ–¥–∏–Ω—ã (`remove(int index)`), –Ω–∞—á–∏–Ω–∞—è —Å –ø–æ–∑–∏—Ü–∏–∏ `i`, —ç–ª–µ–º–µ–Ω—Ç—ã —Å –∏–Ω–¥–µ–∫—Å–æ–≤ [i + 1, size] —Å–¥–≤–∏–≥–∞—é—Ç—Å—è –≤–ª–µ–≤–æ —Å –ø–æ–º–æ—â—å—é `System.arraycopy`, –∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–ª–æ—Ç –º–∞—Å—Å–∏–≤–∞ –æ–±–Ω—É–ª—è–µ—Ç—Å—è.

- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ.**  
  –î–æ–ø—É—Å–∫–∞–µ—Ç `null` —ç–ª–µ–º–µ–Ω—Ç—ã. –ù–µ –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–µ–Ω; –¥–ª—è –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏ ‚Äî –≤–Ω–µ—à–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏–ª–∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã.

```java
private static final int DEFAULT_CAPACITY = 10;
Object[] elementData;
private int size;

private Object[] grow(int minCapacity);

// –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã
public ArrayList() {}
public ArrayList(int initialCapacity) {}
public ArrayList(Collection<? extends E> c) {}
```

–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–æ—Å—Ç–∞ capacity:
```java
// –°—Ç–∞—Ä—Ç —Å –ø—É—Å—Ç–æ–≥–æ —Å–ø–∏—Å–∫–∞ –∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –≤—Å—Ç–∞–≤–∫–∏
List<Integer> list = new ArrayList<>();
list.addAll(List.of(1));                  // size=1, capacity=10
list.addAll(List.of(2, 3, 4, 5, 6, 7, 8, 9, 10)); // size=10, capacity=10
list.addAll(List.of(11));                 // size=11, capacity=15
```

–°–ª–æ–∂–Ω–æ—Å—Ç–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —É `ArrayList`:
- `add(E)` ‚Äî –∞–º–æ—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ O(1)
- `remove(Object)` ‚Äî O(n)
- `get(int)/set(int, E)` ‚Äî O(1)
- `indexOf(Object)` ‚Äî O(n)

### `LinkedList`: –∫–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ (–¥–µ—Ç–∞–ª—å–Ω–æ)

- **–í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ.**  
  –î–≤—É—Å–≤—è–∑–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞: –∫–∞–∂–¥—ã–π —É–∑–µ–ª —Ö—Ä–∞–Ω–∏—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∏ —Å–ª–µ–¥—É—é—â–∏–π —ç–ª–µ–º–µ–Ω—Ç—ã, –∞ —Å–ø–∏—Å–æ–∫ –¥–µ—Ä–∂–∏—Ç —É–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞ –ø–µ—Ä–≤—ã–π –∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π —É–∑–ª—ã. –≠—Ç–æ –¥–∞—ë—Ç O(1) –≤—Å—Ç–∞–≤–∫–∏/—É–¥–∞–ª–µ–Ω–∏—è –Ω–∞ –∫–æ–Ω—Ü–∞—Ö –±–µ–∑ —Å–¥–≤–∏–≥–æ–≤ –º–∞—Å—Å–∏–≤–∞.
  ```java
  // –£–∑–µ–ª –¥–≤—É—Å–≤—è–∑–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞
  private static class Node<E> {
      E item;
      Node<E> next;
      Node<E> prev;
      Node(Node<E> prev, E element, Node<E> next) {
          this.item = element;
          this.next = next;
          this.prev = prev;
      }
  }
  // –ì–æ–ª–æ–≤–∞/—Ö–≤–æ—Å—Ç
  Node<E> first;
  Node<E> last;
  ```

- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–π —Å LinkedList.**  
  –ù–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –ø–æ –ª—é–±–æ–º—É –∏–Ω–¥–µ–∫—Å—É: —á—Ç–æ–±—ã –¥–æ–±—Ä–∞—Ç—å—Å—è –¥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ `get(int)`, –Ω—É–∂–Ω–æ –ø—Ä–æ–π—Ç–∏ –ø–æ —Å—Å—ã–ª–∫–∞–º, —Å–ª–æ–∂–Ω–æ—Å—Ç—å —ç—Ç–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ `O(n)`.
    - –í—Å—Ç–∞–≤–∫–∏/—É–¥–∞–ª–µ–Ω–∏—è –Ω–∞ –∫–æ–Ω—Ü–∞—Ö: O(1) (`addFirst/addLast`, `removeFirst/removeLast`).
    - –ü–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø `get(int)/set(int, E)`: O(n).
    - –ü–æ–∏—Å–∫/—É–¥–∞–ª–µ–Ω–∏–µ –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é: O(n).

- **–ò—Ç–µ—Ä–∞—Ü–∏—è –∏ –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∫–∏.**  
  –î–ª—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±—Ö–æ–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `for-each` –∏–ª–∏ `ListIterator`.  
  –õ–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–æ–∫—Ä—É–≥ —Ç–µ–∫—É—â–µ–π –ø–æ–∑–∏—Ü–∏–∏ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞ ‚Äî **–±–µ–∑ –¥–æ–ø. –ø—Ä–æ—Ö–æ–¥–æ–≤**:
  ```java
  List<String> l = new LinkedList<>(List.of("A", "C"));
  ListIterator<String> it = l.listIterator();
  while (it.hasNext()) {
      String s = it.next();
      if ("A".equals(s)) {
          it.add("B"); // –≤—Å—Ç–∞–≤–∫–∞ –º–µ–∂–¥—É A –∏ C –≤ O(1) –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø–æ–∑–∏—Ü–∏–∏ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞
      }
  }
  // l: A, B, C
  ```
  –ê–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω ‚Äî –∏–Ω–¥–µ–∫—Å–Ω–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è `get(i)` –≤ —Ü–∏–∫–ª–µ: —ç—Ç–æ –º–æ–∂–µ—Ç –¥–∞—Ç—å –∫–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–æ–µ –≤—Ä–µ–º—è.

- **–ü–∞–º—è—Ç—å –∏ locality.**  
  –ù–∞ —ç–ª–µ–º–µ–Ω—Ç –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –≤—ã—à–µ, —á–µ–º —É `ArrayList` (—É–∑–µ–ª + –¥–≤–µ —Å—Å—ã–ª–∫–∏), –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç cache locality —Å–ø–ª–æ—à–Ω–æ–≥–æ –º–∞—Å—Å–∏–≤–∞. –ö–æ–º–ø–µ–Ω—Å–∏—Ä—É–µ—Ç—Å—è **–∫–æ–Ω—Å—Ç–∞–Ω—Ç–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–∞ –∫–æ–Ω—Ü–∞—Ö** –∏ —É–¥–æ–±—Å—Ç–≤–æ–º –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π —á–µ—Ä–µ–∑ –∏—Ç–µ—Ä–∞—Ç–æ—Ä.

- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ.**  
  –î–æ–ø—É—Å–∫–∞–µ—Ç `null` —ç–ª–µ–º–µ–Ω—Ç—ã. –ù–µ –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–µ–Ω; –¥–ª—è –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏ ‚Äî –≤–Ω–µ—à–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏–ª–∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã.

### –ö–æ–≥–¥–∞ —á—Ç–æ –≤—ã–±–∏—Ä–∞—Ç—å
- –ù—É–∂–µ–Ω –±—ã—Å—Ç—Ä—ã–π random access –∏ –∫–æ–º–ø–∞–∫—Ç–Ω–æ—Å—Ç—å –≤ –ø–∞–º—è—Ç–∏ ‚Üí —á–∞—â–µ `ArrayList`.
- –ß–∞—Å—Ç—ã–µ –≤—Å—Ç–∞–≤–∫–∏/—É–¥–∞–ª–µ–Ω–∏—è –Ω–∞ –∫–æ–Ω—Ü–∞—Ö –ø—Ä–∏ —Ä–µ–¥–∫–æ–º –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω–æ–º –¥–æ—Å—Ç—É–ø–µ ‚Üí `LinkedList`.

> üí° –î–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤, –≥–¥–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π –¥–æ—Å—Ç—É–ø –∫ –∫–æ–Ω—Ü–∞–º –æ—á–µ—Ä–µ–¥–∏ (–≤—Å—Ç–∞–≤–∫–∞/—É–¥–∞–ª–µ–Ω–∏–µ —Å –Ω–∞—á–∞–ª–∞ –∏ –∫–æ–Ω—Ü–∞), –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ArrayDeque (–∫–æ—Ç–æ—Ä—ã–π –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –Ω–∏–∂–µ), –∞ –Ω–µ LinkedList. –û–Ω –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ª—É—á—à—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ –∏ –ª—É—á—à—É—é –∫—ç—à-–ª–æ–∫–∞–ª—å–Ω–æ—Å—Ç—å. LinkedList —Å—Ç–æ–∏—Ç –ø—Ä–µ–¥–ø–æ—á–µ—Å—Ç—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–Ω—ã —á–∞—Å—Ç—ã–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ —Å–ø–∏—Å–∫–∞ —á–µ—Ä–µ–∑ ListIterator –∏–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è —è–≤–Ω–æ –¥–≤—É—Å–≤—è–∑–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞.

---

<details>
  <summary>üìí –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∏</summary>
  <p>1) –ß–µ–º –æ—Ç–ª–∏—á–∞—é—Ç—Å—è <code>ArrayList</code> –∏ <code>LinkedList</code> –ø–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É –∏ –∫–∞–∫ —ç—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –∞—Å–∏–º–ø—Ç–æ—Ç–∏–∫—É –æ–ø–µ—Ä–∞—Ü–∏–π? –ù–∞–∑–æ–≤–∏—Ç–µ 3 –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ –∏—Ö —Å–ª–æ–∂–Ω–æ—Å—Ç–∏.</p>
  <p>2) –ö–æ–≥–¥–∞ <code>LinkedList</code> ‚Äî –æ–ø—Ä–∞–≤–¥–∞–Ω–Ω—ã–π –≤—ã–±–æ—Ä, –∞ –∫–æ–≥–¥–∞ –æ–Ω —É—Ö—É–¥—à–∏—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ <code>ArrayList</code>?</p>
  <p>3) –î–ª—è —á–µ–≥–æ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ <code>List</code> –º–µ—Ç–æ–¥—ã <code>get/set/indexOf/subList</code>? –ö–∞–∫ –∏—Ö –Ω–∞–ª–∏—á–∏–µ –æ—Ç—Ä–∞–∂–∞–µ—Ç –º–æ–¥–µ–ª—å ¬´—Å–ø–∏—Å–æ–∫ —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏¬ª?</p>
</details>

## 3. Queue/Deque/PriorityQueue

![queues.png](assets/queues.png)

### –ö–æ–Ω—Ç—Ä–∞–∫—Ç `Queue`
`Queue<E>` –∑–∞–¥–∞—ë—Ç –ø–∞—Ä—ã –º–µ—Ç–æ–¥–æ–≤ —Å —Ä–∞–∑–Ω–æ–π —Å–µ–º–∞–Ω—Ç–∏–∫–æ–π –æ—à–∏–±–æ–∫ ‚Äî ¬´—Å—Ç—Ä–æ–≥–∏–µ¬ª (–±—Ä–æ—Å–∞—é—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è) –∏ ¬´–º—è–≥–∫–∏–µ¬ª (–≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏ –Ω–µ—É—Å–ø–µ—Ö–µ):
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ:
    - `add(e)` ‚Äî –±—Ä–æ—Å–∞–µ—Ç `IllegalStateException`, –µ—Å–ª–∏ —ç–ª–µ–º–µ–Ω—Ç –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω –∏–∑-–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –¥–ª–∏–Ω—ã –æ—á–µ—Ä–µ–¥–∏ (capacity).
    - `offer(e)` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç true/false –≤ —Å–ª—É—á–∞—è—Ö —É—Å–ø–µ—à–Ω–æ–≥–æ –∏ –Ω–µ—É—Å–ø–µ—à–Ω–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–∞.
- –£–¥–∞–ª–µ–Ω–∏–µ –≥–æ–ª–æ–≤—ã:
- `remove()` - —É–¥–∞–ª—è–µ—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≥–æ–ª–æ–≤–Ω–æ–π —ç–ª–µ–º–µ–Ω—Ç. –ï—Å–ª–∏ –æ—á–µ—Ä–µ–¥—å –ø—É—Å—Ç–∞—è ‚Äî –±—Ä–æ—Å–∞–µ—Ç `NoSuchElementException`.
- `poll()` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `null`, –µ—Å–ª–∏ –≥–æ–ª–æ–≤–Ω–æ–π —ç–ª–µ–º–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω.
- –ü—Ä–æ—Å–º–æ—Ç—Ä –≥–æ–ª–æ–≤—ã:
    - `element()` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≥–æ–ª–æ–≤–Ω–æ–π —ç–ª–µ–º–µ–Ω—Ç –±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è, –µ—Å–ª–∏ –æ—á–µ—Ä–µ–¥—å –ø—É—Å—Ç–∞—è ‚Äî –±—Ä–æ—Å–∞–µ—Ç `NoSuchElementException`.
    - `peek()` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≥–æ–ª–æ–≤–Ω–æ–π —ç–ª–µ–º–µ–Ω—Ç, `null`, –µ—Å–ª–∏ —ç–ª–µ–º–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω.

> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ¬´—Å—Ç—Ä–æ–≥–∏–µ¬ª –º–µ—Ç–æ–¥—ã, –∫–æ–≥–¥–∞ –ø—É—Å—Ç–∞—è –æ—á–µ—Ä–µ–¥—å ‚Äî –Ω–∞—Ä—É—à–µ–Ω–∏–µ –æ–∂–∏–¥–∞–µ–º–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è; ¬´–º—è–≥–∫–∏–µ¬ª ‚Äî –∫–æ–≥–¥–∞ –ø—É—Å—Ç–æ—Ç–∞ –¥–æ–ø—É—Å—Ç–∏–º–∞ –≤ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–º —Ä–µ–∂–∏–º–µ.

### –ö–æ–Ω—Ç—Ä–∞–∫—Ç `Deque`
`Deque<E>` —Ä–∞—Å—à–∏—Ä—è–µ—Ç `Queue` –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–∏–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏: —Ä–∞–±–æ—Ç–∞ **—Å –æ–±–æ–∏–º–∏ –∫–æ–Ω—Ü–∞–º–∏** –æ—á–µ—Ä–µ–¥–∏, —Ä–∞–±–æ—Ç–∞ —Å–æ —Å—Ç–µ–∫–æ–º. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è –µ—Å—Ç—å –ø–∞—Ä—ã –º–µ—Ç–æ–¥–æ–≤ –Ω–∞—á–∞–ª–∞/–∫–æ–Ω—Ü–∞: `addFirst/offerFirst`, `addLast/offerLast`, `removeFirst/pollFirst`, `removeLast/pollLast`, –∞ —Ç–∞–∫–∂–µ —Å—Ç–µ–∫–æ–≤—ã–µ `push/pop`.

–ú–∏–Ω–∏‚Äë–ø—Ä–∏–º–µ—Ä: –æ–¥–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚Äî –¥–≤–∞ —Å—Ü–µ–Ω–∞—Ä–∏—è (FIFO/LIFO)
```java
Deque<Integer> dq = new ArrayDeque<>();
// –û—á–µ—Ä–µ–¥—å (FIFO):
dq.offer(1); 
dq.offer(2);
int first = dq.poll(); // 1

// –°—Ç–µ–∫ (LIFO):
dq.push(10); 
dq.push(20);
int top = dq.pop();         // 20
```

### –ò–µ—Ä–∞—Ä—Ö–∏—è –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
–í —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–µ –∫–ª—é—á–µ–≤—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è —ç—Ç–æ–≥–æ —Å–µ–º–µ–π—Å—Ç–≤–∞: `ArrayDeque` (–¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è –æ—á–µ—Ä–µ–¥—å –Ω–∞ –º–∞—Å—Å–∏–≤–µ) –∏ `PriorityQueue` (–æ—á–µ—Ä–µ–¥—å –Ω–∞ –¥–≤–æ–∏—á–Ω–æ–π –∫—É—á–µ).

---

### `ArrayDeque`: Deque –Ω–∞ –º–∞—Å—Å–∏–≤–µ
- –≠–ª–µ–º–µ–Ω—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –º–∞—Å—Å–∏–≤–µ `Object[] elements`, –∏–Ω–¥–µ–∫—Å—ã –≥–æ–ª–æ–≤—ã/—Ö–≤–æ—Å—Ç–∞ ‚Äî `head/tail`. –≠—Ç–æ **–∫–æ–ª—å—Ü–µ–≤–æ–π –±—É—Ñ–µ—Ä**: –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏/—É–¥–∞–ª–µ–Ω–∏–∏ –∏–Ω–¥–µ–∫—Å—ã ¬´–≤—Ä–∞—â–∞—é—Ç—Å—è¬ª –ø–æ –º–æ–¥—É–ª—é –¥–ª–∏–Ω—ã –º–∞—Å—Å–∏–≤–∞.
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –Ω–∞ –∫–æ–Ω—Ü–∞—Ö ‚Äî –∞–º–æ—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ **O(1)**; –ø—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏ –º–∞—Å—Å–∏–≤ **—Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è** –∏ —ç–ª–µ–º–µ–Ω—Ç—ã –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –≤ –Ω–æ–≤—ã–π –±–æ–ª–µ–µ –∫—Ä—É–ø–Ω—ã–π –º–∞—Å—Å–∏–≤.
- –†–µ–∞–ª–∏–∑—É–µ—Ç `Deque`, –ø–æ—ç—Ç–æ–º—É –æ–¥–∏–Ω–∞–∫–æ–≤–æ —É–¥–æ–±–Ω–∞ –¥–ª—è **–æ—á–µ—Ä–µ–¥–∏ (FIFO)** –∏ **—Å—Ç–µ–∫–∞ (LIFO)**, –±–µ–∑ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ –¥–ª—è —É–∑–ª–æ–≤ (–≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Å–≤—è–∑–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä).
- –ù–µ –¥–æ–ø—É—Å–∫–∞–µ—Ç null —ç–ª–µ–º–µ–Ω—Ç—ã, –ø–æ–ø—ã—Ç–∫–∞ –¥–æ–±–∞–≤–∏—Ç—å null –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ NPE.

–°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π –Ω–∞–±—Ä–æ—Å–æ–∫:
```java
// –ü—Ä–∏–º–µ—Ä–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ArrayDeque
Object[] elements; // –≠–ª–µ–º–µ–Ω—Ç—ã
int head;          // –∏–Ω–¥–µ–∫—Å –ø–µ—Ä–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
int tail;          // –∏–Ω–¥–µ–∫—Å —Å–ª–µ–¥—É—é—â–µ–π –ø–æ–∑–∏—Ü–∏–∏ –ø–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ
private void grow(int needed); // –ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ capacity —Ä–∞–∑–º–µ—Ä–∞ –º–∞—Å—Å–∏–≤ –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –≤ –º–∞—Å—Å–∏–≤ –±–æ–ª—å—à–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞
```

–ö–æ–≥–¥–∞ –≤—ã–±–∏—Ä–∞—Ç—å:
- –ù—É–∂–Ω—ã **–±—ã—Å—Ç—Ä—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞ –∫–æ–Ω—Ü–∞—Ö** –∏ –Ω–∏–∑–∫–∏–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç.
- –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä: –æ—á–µ—Ä–µ–¥—å/—Å—Ç–µ–∫.
- –•–æ—Ä–æ—à–∞—è –∑–∞–º–µ–Ω–∞ `LinkedList` –¥–ª—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–∞ –æ—á–µ—Ä–µ–¥—å/—Å—Ç–µ–∫.

---

### `PriorityQueue`: Queue –Ω–∞ –¥–≤–æ–∏—á–Ω–æ–π –∫—É—á–µ
- –ë–∏–Ω–∞—Ä–Ω–∞—è –∫—É—á–∞ –≤ –º–∞—Å—Å–∏–≤–µ `Object[] queue`: —É —É–∑–ª–∞ `i` –¥–æ—á–µ—Ä–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã - `2*i+1` –∏ `2*i+2`. –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç ‚Äî –≤ –∫–æ—Ä–Ω–µ (`queue[0]`).
- –ü—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è ¬´–ø—Ä–æ—Å–µ–∏–≤–∞–Ω–∏–µ –≤–≤–µ—Ä—Ö¬ª (*sift‚Äëup*), –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ –º–∏–Ω–∏–º—É–º–∞ ‚Äî ¬´–ø—Ä–æ—Å–µ–∏–≤–∞–Ω–∏–µ –≤–Ω–∏–∑¬ª (*sift‚Äëdown*), –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç –∫—É—á–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è.
-  –ø–æ—Ä—è–¥–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ –∏—Ö –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É: —Å–Ω–∞—á–∞–ª–∞ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è —ç–ª–µ–º–µ–Ω—Ç—ã —Å –Ω–∞–∏–≤—ã—Å—à–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —ç—Ç–æ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Comparable) –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å –Ω–∞–∏–º–µ–Ω—å—à–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ–º, —á—Ç–æ –ø–æ —Å—É—Ç–∏ —è–≤–ª—è–µ—Ç—Å—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –∫—É—á–µ–π (min-heap). –î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –ø–µ—Ä–≤—ã–º) –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ—á–µ—Ä–µ–¥–∏.
- –ü–æ–¥—Ö–æ–¥–∏—Ç, –∫–æ–≥–¥–∞ –≤–∞–∂–µ–Ω **–ø–æ—Ä—è–¥–æ–∫ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É**, –∞ –Ω–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –≤—Å—Ç–∞–≤–∫–∏: –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –∑–∞–¥–∞—á, –≤—ã–±–æ—Ä k‚Äë–Ω–∞–∏–º–µ–Ω—å—à–∏—Ö, –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∏.

---

### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∞–∫—Ü–µ–Ω—Ç—ã (–∫–æ–≥–¥–∞ —á—Ç–æ –±—Ä–∞—Ç—å)
- **`ArrayDeque`**: –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±—ã—Å—Ç—Ä–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ **FIFO/LIFO** –≤ –ø–∞–º—è—Ç–∏, –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ **O(1)** –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞ –∫–æ–Ω—Ü–∞—Ö, –Ω–∏–∑–∫–∏–π overhead, —É–¥–æ–±–Ω–∞ –∫–∞–∫ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –±—É—Ñ–µ—Ä/–æ—á–µ—Ä–µ–¥—å/—Å—Ç–µ–∫.
- **`PriorityQueue`**: –∫–æ–≥–¥–∞ –Ω—É–∂–µ–Ω **–æ—Ç–±–æ—Ä/–æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É**. –ß—Ç–µ–Ω–∏–µ –≥–æ–ª–æ–≤—ã ‚Äî –±—ã—Å—Ç—Ä–æ, –≤—Å—Ç–∞–≤–∫–∞/–∏–∑–≤–ª–µ—á–µ–Ω–∏–µ ‚Äî –ª–æ–≥–∞—Ä–∏—Ñ–º–∏—á–µ—Å–∫–∏–µ, –ø–æ—Ä—è–¥–æ–∫ –∑–∞–¥–∞—ë—Ç—Å—è –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä–æ–º/Comparable.

---

<details>
  <summary>üìí –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∏</summary>
  <p>1) –ß–µ–º –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –ø–∞—Ä—ã –º–µ—Ç–æ–¥–æ–≤ –≤ <code>Queue</code>: <code>add/remove/element</code> vs <code>offer/poll/peek</code>? –í –∫–∞–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∂–¥—É—é –ø–∞—Ä—É?</p>
  <p>2) –ü–æ–∫–∞–∂–∏—Ç–µ, –∫–∞–∫ –Ω–∞ –æ–¥–Ω–æ–º <code>Deque</code> —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏ –æ—á–µ—Ä–µ–¥—å (FIFO), –∏ —Å—Ç–µ–∫ (LIFO). –ö–∞–∫–∏–µ –º–µ—Ç–æ–¥—ã –≤—ã –≤—ã–±–µ—Ä–µ—Ç–µ –∏ –ø–æ—á–µ–º—É?</p>
  <p>3) –û–±—ä—è—Å–Ω–∏—Ç–µ –∏–¥–µ—é ¬´–∫–æ–ª—å—Ü–µ–≤–æ–≥–æ –±—É—Ñ–µ—Ä–∞¬ª –≤ <code>ArrayDeque</code> –∏ —Ä–æ–ª—å –∏–Ω–¥–µ–∫—Å–æ–≤ <code>head/tail</code>. –ü–æ—á–µ–º—É –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞ –∫–æ–Ω—Ü–∞—Ö —Ä–∞–±–æ—Ç–∞—é—Ç –∞–º–æ—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ –∑–∞ O(1)?</p>
  <p>4) –ö–∞–∫ <code>PriorityQueue</code> –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –Ω–∞ –º–∞—Å—Å–∏–≤–µ? –ì–¥–µ –∑–∞–¥–∞—ë—Ç—Å—è –ø–æ—Ä—è–¥–æ–∫ (—á–µ—Ä–µ–∑ <code>Comparable</code> –∏–ª–∏ <code>Comparator</code>) –∏ –∫–∞–∫ —ç—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø–æ–≤–µ–¥–µ–Ω–∏–µ?</p>
</details>


## 4. Map: –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ

![maps.png](assets/maps.png)

### üß© –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Map<K, V>`

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Map` –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∞—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä: –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–ª—é—á–µ–π –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏—è. –ö–ª—é—á–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã, –∑–Ω–∞—á–µ–Ω–∏—è –º–æ–≥—É—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å—Å—è. –í Java Map –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ø–æ–¥—Ç–∏–ø–æ–º Collection.

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã `Map` (—Ç–∞–±–ª–∏—Ü–∞)

| –ú–µ—Ç–æ–¥ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ü–æ—è—Å–Ω–µ–Ω–∏–µ |
|-------|------------|-----------|
| `V put(K key, V value)` | –î–æ–±–∞–≤–ª—è–µ—Ç (–∏–ª–∏ –∑–∞–º–µ–Ω—è–µ—Ç) –ø–∞—Ä—É –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–ª–∏ `null` |
| `V get(Object key)` | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –∫–ª—é—á—É | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `null`, –µ—Å–ª–∏ –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω |
| `V remove(Object key)` | –£–¥–∞–ª—è–µ—Ç –∫–ª—é—á –∏ –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ, —Å–≤—è–∑–∞–Ω–Ω–æ–µ —Å –∫–ª—é—á–æ–º |
| `boolean containsKey(Object key)` | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∫–ª—é—á–∞ | –†–∞–±–æ—Ç–∞–µ—Ç –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º `containsValue` |
| `boolean containsValue(Object value)` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∑–Ω–∞—á–µ–Ω–∏—è | –õ–∏–Ω–µ–π–Ω—ã–π –ø—Ä–æ—Ö–æ–¥ –ø–æ –≤—Å–µ–º –∑–Ω–∞—á–µ–Ω–∏—è–º |
| `int size()` / `boolean isEmpty()` | –†–∞–∑–º–µ—Ä / –ø—É—Å—Ç–æ—Ç–∞ –∫–∞—Ä—Ç—ã | |
| `void clear()` | –£–¥–∞–ª—è–µ—Ç –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã | |
| `void putAll(Map<? extends K, ? extends V> m)` | –ú–∞—Å—Å–æ–≤–∞—è –≤—Å—Ç–∞–≤–∫–∞ | –ö–æ–ø–∏—Ä—É–µ—Ç –≤—Å–µ –ø–∞—Ä—ã –∏–∑ –¥—Ä—É–≥–æ–π Map |
| `Set<K> keySet()` | –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –≤—Å–µ—Ö –∫–ª—é—á–µ–π | –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏, –±–µ–∑ –∑–Ω–∞—á–µ–Ω–∏–π |
| `Collection<V> values()` | –ö–æ–ª–ª–µ–∫—Ü–∏—è –≤—Å–µ—Ö –∑–Ω–∞—á–µ–Ω–∏–π | –ó–Ω–∞—á–µ–Ω–∏—è –º–æ–≥—É—Ç –ø–æ–≤—Ç–æ—Ä—è—Ç—å—Å—è |
| `Set<Map.Entry<K, V>> entrySet()` | –í—Å–µ –ø–∞—Ä—ã –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ | –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ for-each |
| `V getOrDefault(Object key, V defaultValue)` | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏–ª–∏ –¥–µ—Ñ–æ–ª—Ç | –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è "lenient" –ª–æ–≥–∏–∫–∏ |
| `V putIfAbsent(K key, V value)` | –í—Å—Ç–∞–≤–∫–∞, –µ—Å–ª–∏ –∫–ª—é—á–∞ –µ—â—ë –Ω–µ—Ç | |
| `boolean replace(K key, V oldValue, V newValue)` | –û–±–Ω–æ–≤–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –∫–ª—é—á—É, –µ—Å–ª–∏ —Ç–µ–∫—É—â–µ–µ —Ä–∞–≤–Ω–æ `oldValue` | |
| `V replace(K key, V value)` | –ü—Ä–æ—Å—Ç–æ–π `put`, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∫–ª—é—á —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç | |

> üí° –í–∞–∂–Ω–æ! `get(key)` –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å `null` –∫–∞–∫ –∏–∑‚Äë–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∫–ª—é—á–∞, —Ç–∞–∫ –∏ –∏–∑‚Äë–∑–∞ —Ö—Ä–∞–Ω–∏–º–æ–≥–æ `null` –∑–Ω–∞—á–µ–Ω–∏—è. –î–ª—è —Ä–∞–∑–ª–∏—á–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `containsKey(key)`.

---

### üß† –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç `HashMap`

#### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ö–µ—à-—Ñ—É–Ω–∫—Ü–∏–∏

–•–µ—à-—Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ –∫–ª—é—á—É, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å **—Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ ‚Äî —Ö–µ—à-–∫–æ–¥**, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –∏–Ω–¥–µ–∫—Å –±–∞–∫–µ—Ç–∞. –¶–µ–ª—å ‚Äî **–æ–±–µ—Å–ø–µ—á–∏—Ç—å —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ** –∫–ª—é—á–µ–π –ø–æ –º–∞—Å—Å–∏–≤—É –±–∞–∫–µ—Ç–æ–≤, —á—Ç–æ–±—ã –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ª–ª–∏–∑–∏–∏ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –±—ã—Å—Ç—Ä—É—é –≤—Å—Ç–∞–≤–∫—É/–¥–æ—Å—Ç—É–ø **O(1)** –≤ —Å—Ä–µ–¥–Ω–µ–º.

```java
static final int hash(Object key) {
   int h;
   return (key == null) ? 0 : (h = key.hashCode()) ^ (h >>> 16);
}
```

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `XOR` —Å –±–∏—Ç–æ–≤—ã–º —Å–¥–≤–∏–≥–æ–º, —á—Ç–æ–±—ã ¬´–ø–µ—Ä–µ–º–µ—à–∞—Ç—å¬ª —Å—Ç–∞—Ä—à–∏–µ –∏ –º–ª–∞–¥—à–∏–µ –±–∏—Ç—ã `hashCode()`.
- –≠—Ç–æ —É–ª—É—á—à–∞–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ö–µ—à–µ–π –ø–æ –±–∞–∫–µ—Ç–∞–º, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ `hashCode()` –ø–ª–æ—Ö–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω.

---

#### –ß—Ç–æ —Ç–∞–∫–æ–µ –±–∞–∫–µ—Ç

**–ë–∞–∫–µ—Ç** ‚Äî —ç—Ç–æ —ç–ª–µ–º–µ–Ω—Ç –º–∞—Å—Å–∏–≤–∞ –≤–Ω—É—Ç—Ä–∏ `HashMap`, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–∏–±–æ:
- `null` (–µ—Å–ª–∏ –ø—É—Å—Ç),
- —Ü–µ–ø–æ—á–∫—É `Node<K,V>` (—Å–≤—è–∑–Ω—ã–π —Å–ø–∏—Å–æ–∫),
- –ª–∏–±–æ –∫—Ä–∞—Å–Ω–æ-—á—ë—Ä–Ω–æ–µ –¥–µ—Ä–µ–≤–æ `TreeNode<K,V>`, –µ—Å–ª–∏ —Ü–µ–ø–æ—á–∫–∞ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–∞—è.

```java
Node<K,V>[] table;
```

–ò–Ω–¥–µ–∫—Å –±–∞–∫–µ—Ç–∞ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∫–∞–∫:

```java
int index = (n - 1) & hash(key);
```

- `n` ‚Äî –¥–ª–∏–Ω–∞ –º–∞—Å—Å–∏–≤–∞ `table`, –≤—Å–µ–≥–¥–∞ —Å—Ç–µ–ø–µ–Ω—å –¥–≤–æ–π–∫–∏.
- –ú–∞—Å–∫–∞ `n-1` –¥–∞—ë—Ç —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –±–µ–∑ `%` ‚Äî –±—ã—Å—Ç—Ä–µ–µ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ.

---

#### –ö–æ–ª–ª–∏–∑–∏–∏ –∏ —Ü–µ–ø–æ—á–∫–∏

–ï—Å–ª–∏ –¥–≤–∞ —Ä–∞–∑–Ω—ã—Ö –∫–ª—é—á–∞ –¥–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å, –≤–æ–∑–Ω–∏–∫–∞–µ—Ç **–∫–æ–ª–ª–∏–∑–∏—è**. –û–Ω–∏ —Ä–µ—à–∞—é—Ç—Å—è —Ü–µ–ø–æ—á–∫–∞–º–∏:

```java
static class Node<K,V> {
   final int hash;
   final K key;
   V value;
   Node<K,V> next;
}
```

–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞:
- –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∏–Ω–¥–µ–∫—Å,
- –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–æ—Ö–æ–¥ –ø–æ —Ü–µ–ø–æ—á–∫–µ —Å `equals()`,
- –µ—Å–ª–∏ –∫–ª—é—á —É–∂–µ –µ—Å—Ç—å ‚Äî –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ,
- –∏–Ω–∞—á–µ ‚Äî –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤—ã–π `Node`.

---

#### –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ (`resize`) –∏ `loadFactor`

- `loadFactor` (–æ–±—ã—á–Ω–æ 0.75) –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, **–Ω–∞—Å–∫–æ–ª—å–∫–æ** –º–æ–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –∫–∞—Ä—Ç—É.
- –ö–∞–∫ —Ç–æ–ª—å–∫–æ `size >= capacity * loadFactor`, `HashMap` **—Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è**:
    - —Ä–∞–∑–º–µ—Ä –º–∞—Å—Å–∏–≤–∞ —É–¥–≤–∞–∏–≤–∞–µ—Ç—Å—è,
    - —ç–ª–µ–º–µ–Ω—Ç—ã **—Ä–µ-—Ö–µ—à–∏—Ä—É—é—Ç—Å—è**: –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –Ω–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å, –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –ø–æ –Ω–æ–≤–æ–π —Ç–∞–±–ª–∏—Ü–µ.

```java
threshold = capacity * loadFactor;
```

---

#### –ü–µ—Ä–µ–≤–æ–¥ —Ü–µ–ø–æ—á–∫–∏ –≤ –¥–µ—Ä–µ–≤–æ (`treeify`)

–ï—Å–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –æ–¥–Ω–æ–º –±–∞–∫–µ—Ç–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç `TREEIFY_THRESHOLD` (8):

- —Ü–µ–ø–æ—á–∫–∞ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ **–∫—Ä–∞—Å–Ω–æ-—á—ë—Ä–Ω–æ–µ –¥–µ—Ä–µ–≤–æ**
- –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏ –∫ `O(n)` –ø—Ä–∏ –¥–æ—Å—Ç—É–ø–µ

> üí° –°—Ç–æ–∏—Ç —É–ø–æ–º—è–Ω—É—Ç—å UNTREEIFY_THRESHOLD (= 6): –ø—Ä–∏ —É–º–µ–Ω—å—à–µ–Ω–∏–∏ –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏ –ø–æ—Å–ª–µ –æ–ø–µ—Ä–∞—Ü–∏–π –¥–µ—Ä–µ–≤–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–±—Ä–∞—Ç–Ω–æ —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç–æ –≤ —Å–ø–∏—Å–æ–∫.

```java
static final class TreeNode<K,V> extends LinkedHashMap.Entry<K,V> {
   TreeNode<K,V> parent, left, right;
   boolean red;
}
```

> ‚ö†Ô∏è –ï—Å–ª–∏ –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–∫–µ—Ç–æ–≤ < `MIN_TREEIFY_CAPACITY` (64), –≤–º–µ—Å—Ç–æ –¥–µ—Ä–µ–≤–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç `resize` ‚Äî —Å–Ω–∞—á–∞–ª–∞ —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–∫–µ—Ç–æ–≤.

---

#### –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø–æ—Ä—è–¥–∫–∞: `tieBreakOrder`

–ï—Å–ª–∏ –¥–≤–∞ –æ–±—ä–µ–∫—Ç–∞ –Ω–µ —Å—Ä–∞–≤–Ω–∏–º—ã (`!Comparable`), –Ω–æ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –æ–¥–Ω–æ –¥–µ—Ä–µ–≤–æ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `tieBreakOrder`:

```java
static int tieBreakOrder(Object a, Object b) {
   int d = a.getClass().getName().compareTo(b.getClass().getName());
   return (d != 0) ? d :
       (System.identityHashCode(a) <= System.identityHashCode(b) ? -1 : 1);
}
```

---

### üß≠ `SortedMap` –∏ `NavigableMap`

#### `SortedMap<K, V>`

Map —Å **–æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏**:
- –ª–∏–±–æ –ø–æ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É (`Comparable`)
- –ª–∏–±–æ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π `Comparator`

–ú–µ—Ç–æ–¥—ã:

```java
SortedMap<K,V> subMap(K fromKey, K toKey);
SortedMap<K,V> headMap(K toKey);
SortedMap<K,V> tailMap(K fromKey);
K firstKey(); // –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–ª—é—á
K lastKey();  // –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –∫–ª—é—á
```

–ü—Ä–∏–º–µ—Ä:

```java
SortedMap<Integer, String> grades = new TreeMap<>();
grades.put(1, "F");
grades.put(5, "A");
grades.headMap(3);  // –≤—Å—ë –¥–æ 3
```

---

#### `NavigableMap<K, V>`

–†–∞—Å—à–∏—Ä—è–µ—Ç `SortedMap` ‚Äî –¥–æ–±–∞–≤–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø –∫ **–±–ª–∏–∂–∞–π—à–∏–º –∫–ª—é—á–∞–º**:

```java
K lowerKey(K key);     // –∫–ª—é—á < key
K floorKey(K key);     // ‚â§ key
K ceilingKey(K key);   // ‚â• key
K higherKey(K key);    // > key

Map.Entry<K, V> lowerEntry(K key);
Map.Entry<K, V> floorEntry(K key);
// ...
```

–ü—Ä–∏–º–µ—Ä:

```java
NavigableMap<Integer, String> scores = new TreeMap<>();
scores.put(100, "A");
scores.put(90, "B");
scores.put(80, "C");

scores.floorKey(85);  // 80
scores.ceilingKey(85); // 90
```

---

### üîó LinkedHashMap

–†–∞—Å—à–∏—Ä—è–µ—Ç `HashMap` —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ø–æ—Ä—è–¥–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤.

```java
static class Entry<K,V> extends HashMap.Node<K,V> {
   Entry<K,V> before, after;
}
```

- **accessOrder = false** ‚Äî –ø–æ—Ä—è–¥–æ–∫ –≤—Å—Ç–∞–≤–∫–∏ (insertion-order)
- **accessOrder = true** ‚Äî –ø–æ—Ä—è–¥–æ–∫ –¥–æ—Å—Ç—É–ø–∞ (access-order), –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ LRU-–∫—ç—à–∞—Ö

---

### üå≤ TreeMap

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç **–∫—Ä–∞—Å–Ω–æ-—á—ë—Ä–Ω–æ–µ –¥–µ—Ä–µ–≤–æ**
- –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏: –≤—Å—Ç–∞–≤–∫–∞, –ø–æ–∏—Å–∫, —É–¥–∞–ª–µ–Ω–∏–µ ‚Äî **O(log n)**
- –ù–µ –¥–æ–ø—É—Å–∫–∞–µ—Ç `null` –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª—é—á–µ–π, –∑–Ω–∞—á–µ–Ω–∏—è `null` –¥–æ–ø—É—Å–∫–∞—é—Ç—Å—è.
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–∞–∫ **–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ (`Comparable`)**, —Ç–∞–∫ –∏ **–≤–Ω–µ—à–Ω–∏–π –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä (`Comparator`)**

–ü—Ä–∏–º–µ—Ä—ã:

```java
TreeMap<Grade, Integer> map = new TreeMap<>(); // natural order (implements Comparable)

TreeMap<Grade, Integer> map = new TreeMap<>(
   Comparator.comparing(Grade::getScore)
); // custom order
```

---

### üì¶ –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

#### `Map.Entry<K, V>`

```java
interface Entry<K, V> {
   K getKey();
   V getValue();
   V setValue(V value);
}
```

–ü–æ–∑–≤–æ–ª—è–µ—Ç –∏—Ç–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ –ø–∞—Ä–∞–º `–∫–ª—é—á‚Äì–∑–Ω–∞—á–µ–Ω–∏–µ`:

```java
for (Map.Entry<Integer, String> entry : map.entrySet()) {
   System.out.println(entry.getKey() + ": " + entry.getValue());
}
```

### üì¶ –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Map: —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ

| –†–µ–∞–ª–∏–∑–∞—Ü–∏—è       | –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ                     | –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏                                |
|------------------|--------------------------------|---------------------------------------------|
| `HashMap`        | –ú–∞—Å—Å–∏–≤ –±–∞–∫–µ—Ç–æ–≤, —Ü–µ–ø–æ—á–∫–∏/–¥–µ—Ä–µ–≤—å—è | –ë—ã—Å—Ç—Ä–∞—è –≤—Å—Ç–∞–≤–∫–∞/–¥–æ—Å—Ç—É–ø, –Ω–µ—Ç –ø–æ—Ä—è–¥–∫–∞         |
| `LinkedHashMap`  | `HashMap` + –¥–≤—É—Å–≤—è–∑–Ω—ã–π —Å–ø–∏—Å–æ–∫  | –ü–æ—Ä—è–¥–æ–∫ –≤—Å—Ç–∞–≤–∫–∏ / –¥–æ—Å—Ç—É–ø–∞ (`accessOrder`)   |
| `TreeMap`        | –ö—Ä–∞—Å–Ω–æ-—á—ë—Ä–Ω–æ–µ –¥–µ—Ä–µ–≤–æ           | –ö–ª—é—á–∏ –≤ –ø–æ—Ä—è–¥–∫–µ; –Ω–µ—Ç `null` –≤ –∫–ª—é—á–∞—Ö        |

---

<details>
  <summary>üìí –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∏</summary>
  <p>1) –ó–∞—á–µ–º –Ω—É–∂–Ω–∞ —Ö–µ—à-—Ñ—É–Ω–∫—Ü–∏—è –∏ —á—Ç–æ –æ–Ω–∞ –¥–µ–ª–∞–µ—Ç –≤ <code>HashMap</code>?</p>
  <p>2) –ß—Ç–æ —Ç–∞–∫–æ–µ –±–∞–∫–µ—Ç –∏ –∫–∞–∫ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫—É–¥–∞ –ø–æ–ø–∞–¥—ë—Ç —ç–ª–µ–º–µ–Ω—Ç?</p>
  <p>3) –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç <code>resize</code> –≤ <code>HashMap</code>?</p>
  <p>4) –í –∫–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö –±–∞–∫–µ—Ç –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –¥–µ—Ä–µ–≤–æ?</p>
  <p>5) –ß–µ–º <code>SortedMap</code> –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç <code>NavigableMap</code>?</p>
  <p>6) –ß—Ç–æ –¥–µ–ª–∞–µ—Ç <code>tieBreakOrder</code> –∏ –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω?</p>
</details>

## 5. –°–µ–º–µ–π—Å—Ç–≤–æ Set: HashSet, LinkedHashSet, TreeSet

![sets.png](assets/sets.png)

`Set` –≤ Java ‚Äî —ç—Ç–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–π –∫–æ–ª–ª–µ–∫—Ü–∏—é —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤.

### –ö–æ–Ω—Ç—Ä–∞–∫—Ç –∏ —Å–≤–æ–π—Å—Ç–≤–∞ `Set`
- **–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å.** –í –º–Ω–æ–∂–µ—Å—Ç–≤–µ –Ω–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤: –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `equals` (–¥–ª—è hash‚Äë—Å—Ç—Ä—É–∫—Ç—É—Ä –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Å `hashCode`).
- **–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è.** `add(e)` –≤–µ—Ä–Ω—ë—Ç `false`, –µ—Å–ª–∏ —ç–ª–µ–º–µ–Ω—Ç —É–∂–µ –µ—Å—Ç—å; `contains/remove` –æ–ø–∏—Ä–∞—é—Ç—Å—è –Ω–∞ —Ç–æ—Ç –∂–µ –∫—Ä–∏—Ç–µ—Ä–∏–π —Ä–∞–≤–µ–Ω—Å—Ç–≤–∞.
- **–ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã `equals`/`hashCode` –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤.** –î–≤–∞ `Set` —Ä–∞–≤–Ω—ã, –µ—Å–ª–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã (–ø–æ—Ä—è–¥–æ–∫ –Ω–µ –≤–∞–∂–µ–Ω). `hashCode` –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Ä–∞–≤–µ–Ω —Å—É–º–º–µ `hashCode` –µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤.
- **–ü–æ—Ä—è–¥–æ–∫ –æ–±—Ö–æ–¥–∞.** –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Set` —Å–∞–º –ø–æ —Å–µ–±–µ –ø–æ—Ä—è–¥–æ–∫ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç; –æ–Ω –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π: —É `HashSet` ‚Äî –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π, —É `LinkedHashSet` ‚Äî –ø–æ—Ä—è–¥–æ–∫ –≤—Å—Ç–∞–≤–∫–∏, —É `TreeSet` ‚Äî —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫.
- **`null`.** –ü–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–æ–ø—É—Å—Ç–∏–º, –Ω–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: `HashSet/LinkedHashSet` –ø–æ–∑–≤–æ–ª—è—é—Ç –æ–¥–∏–Ω `null`, `TreeSet` ‚Äî –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ –ø—Ä–∏ –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä–µ –±–µ–∑ —è–≤–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ `null`.
- **Fail‚Äëfast –∏—Ç–µ—Ä–∞—Ç–æ—Ä—ã.** –°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤–Ω–µ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞ –ø—Ä–∏–≤–æ–¥—è—Ç –∫ `ConcurrentModificationException`.
- **–ú—É—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å (–∏–∑–º–µ–Ω—è–µ–º–æ—Å—Ç—å) —ç–ª–µ–º–µ–Ω—Ç–æ–≤.** –ù–µ–ª—å–∑—è –º–µ–Ω—è—Ç—å –ø–æ–ª—è, –≤–ª–∏—è—é—â–∏–µ –Ω–∞ `equals/hashCode`, –ø–æ–∫–∞ —ç–ª–µ–º–µ–Ω—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –º–Ω–æ–∂–µ—Å—Ç–≤–µ ‚Äî —ç—Ç–æ –Ω–∞—Ä—É—à–∏—Ç –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã –ø–æ–∏—Å–∫–∞/—É–¥–∞–ª–µ–Ω–∏—è.
- **–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏.** –ù–µ –≤—Å–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –º—É—Ç–∞—Ü–∏—é: –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ —Ñ–∞–±—Ä–∏–∫–∏ (`Set.of(...)`) –±—Ä–æ—Å–∞—é—Ç `UnsupportedOperationException` –Ω–∞ –∏–∑–º–µ–Ω—è—é—â–∏—Ö –º–µ—Ç–æ–¥–∞—Ö.

---

### `HashSet`: –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–æ–≤–µ—Ä—Ö `HashMap`
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —á–µ—Ä–µ–∑ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π `HashMap<E,Object>`, –≥–¥–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ `add(e)` ‚Äî —ç—Ç–æ –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º –æ–ø–µ—Ä–∞—Ü–∏—è `map.put(e, PRESENT)`, –≥–¥–µ —ç–ª–µ–º–µ–Ω—Ç e –∫–ª–∞–¥—ë—Ç—Å—è –≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π HashMap –∫–∞–∫ –∫–ª—é—á, –∞ –∑–Ω–∞—á–µ–Ω–∏–µ–º —Å–ª—É–∂–∏—Ç –æ–¥–Ω–∞ –∏ —Ç–∞ –∂–µ ¬´–∑–∞–≥–ª—É—à–∫–∞¬ª PRESENT.
- –ï—Å–ª–∏ `put(e)` –≤–µ—Ä–Ω—É–ª `null` ‚Üí –∫–ª—é—á–∞ –µ—â—ë –Ω–µ –±—ã–ª–æ ‚Üí —ç–ª–µ–º–µ–Ω—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω (add –≤–µ—Ä–Ω—ë—Ç true);
- –ï—Å–ª–∏ –≤–µ—Ä–Ω—É–ª –Ω–µ `null` ‚Üí –∫–ª—é—á —É–∂–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª ‚Üí —ç—Ç–æ –¥—É–±–ª–∏–∫–∞—Ç (`add(e)` –≤–µ—Ä–Ω—ë—Ç `false`).
-
```java
// –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å—Ö–µ–º–∞
private static final Object PRESENT = new Object();
private HashMap<E, Object> map;

public boolean add(E e) {
    return map.put(e, PRESENT) == null;
}
```

- **–ü–æ—Ä—è–¥–æ–∫ –æ–±—Ö–æ–¥–∞** –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –∏ –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è –ø—Ä–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö, —Ä–∞–∑–º–µ—Ä–∞—Ö —Ç–∞–±–ª–∏—Ü—ã, –≤–µ—Ä—Å–∏—è—Ö JDK –∏ —Ç. –ø. –ü–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ –Ω–µ–≥–æ –Ω–µ–ª—å–∑—è. –ù—É–∂–µ–Ω –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ ‚Äî –±–µ—Ä–∏—Ç–µ `LinkedHashSet` (–ø–æ—Ä—è–¥–æ–∫ –≤—Å—Ç–∞–≤–∫–∏).
- –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ `equals/hashCode`. –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–ø–∏—Ä–∞–µ—Ç—Å—è –Ω–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç: —Ä–∞–≤–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –æ–±—è–∑–∞–Ω—ã –∏–º–µ—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π hashCode. `equals` ‚Äî —Ä–µ—Ñ–ª–µ–∫—Å–∏–≤–µ–Ω, —Å–∏–º–º–µ—Ç—Ä–∏—á–µ–Ω, —Ç—Ä–∞–Ω–∑–∏—Ç–∏–≤–µ–Ω –∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω. –ú–µ–Ω—è—Ç—å –ø–æ–ª—è, –≤–ª–∏—è—é—â–∏–µ –Ω–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ/—Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø–æ–∫–∞ —ç–ª–µ–º–µ–Ω—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –º–Ω–æ–∂–µ—Å—Ç–≤–µ, –Ω–µ–ª—å–∑—è ‚Äî –ø–æ–∏—Å–∫/—É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞–Ω—É—Ç –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º–∏.
- `null`. –î–æ–ø—É—Å–∫–∞–µ—Ç—Å—è —Ä–æ–≤–Ω–æ –æ–¥–∏–Ω `null`-—ç–ª–µ–º–µ–Ω—Ç; `add/contains/remove(null)` —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. –ù—É–∂–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `null` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `LinkedHashSet`. –î–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ —Å `null` ‚Äî —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ TreeSet —Å –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä–æ–º, –∫–æ—Ç–æ—Ä—ã–π —è–≤–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç `null`.

### `LinkedHashSet`: –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –æ–±—Ö–æ–¥–∞

- –û—Å–Ω–æ–≤–∞–Ω –Ω–∞ `LinkedHashMap`: –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç —Ö—Ä–∞–Ω–∏—Ç—Å—è –∫–∞–∫ –∫–ª—é—á, –∞ –≤—Å–µ –∑–∞–ø–∏—Å–∏ —Å–≤—è–∑–∞–Ω—ã –≤ –¥–≤—É—Å–≤—è–∑–Ω—ã–π —Å–ø–∏—Å–æ–∫. –ë–ª–∞–≥–æ–¥–∞—Ä—è —ç—Ç–æ–º—É –∏—Ç–µ—Ä–∞—Ü–∏—è –≤—Å–µ–≥–¥–∞ –∏–¥—ë—Ç –≤ –ø–æ—Ä—è–¥–∫–µ –≤—Å—Ç–∞–≤–∫–∏ (insertion-order).
- –ü–æ—Ä—è–¥–æ–∫ –æ–±—Ö–æ–¥–∞ —Å—Ç–∞–±–∏–ª–µ–Ω –∏ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π/rehash. –ù–æ –µ—Å–ª–∏ —ç–ª–µ–º–µ–Ω—Ç —É–¥–∞–ª–∏—Ç—å –∏ –≤—Å—Ç–∞–≤–∏—Ç—å —Å–Ω–æ–≤–∞ ‚Äî –æ–Ω –æ–∫–∞–∂–µ—Ç—Å—è –≤ –∫–æ–Ω—Ü–µ.
- `null`. –†–∞–∑—Ä–µ—à—ë–Ω —Ä–æ–≤–Ω–æ –æ–¥–∏–Ω null-—ç–ª–µ–º–µ–Ω—Ç; –µ–≥–æ –ø–æ–ª–æ–∂–µ–Ω–∏–µ —Ç–∞–∫–∂–µ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –ø–æ –º–æ–º–µ–Ω—Ç—É –≤—Å—Ç–∞–≤–∫–∏.
- –û–ø–µ—Ä–∞—Ü–∏–∏. –û–∂–∏–¥–∞–µ–º–æ `O(1)` –¥–ª—è `add/contains/remove`, –∫–∞–∫ —É `HashSet`, –Ω–æ —Å –Ω–µ–±–æ–ª—å—à–æ–π –∫–æ–Ω—Å—Ç–∞–Ω—Ç–æ–π —Å–≤–µ—Ä—Ö—É –∏–∑-–∑–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å–≤—è–∑–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞.
- **Fail-fast**. –ò—Ç–µ—Ä–∞—Ç–æ—Ä—ã fail-fast: —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤–Ω–µ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞ –ø—Ä–∏–≤–æ–¥—è—Ç –∫ `ConcurrentModificationException`.
- –£–¥–æ–±–µ–Ω –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è/—ç–∫—Å–ø–æ—Ä—Ç–∞/–∫–µ—à–µ–π, –≥–¥–µ –Ω—É–∂–µ–Ω —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ –æ–±—Ö–æ–¥–∞.
-
```java
Set<Integer> order = new LinkedHashSet<>();
order.add(3); 
order.add(1); 
order.add(2);

Iterator<Integer> it = order.iterator();
while (it.hasNext()) {
    System.out.println(it.next()); // –ò—Ç–µ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ: 3, 1, 2
}
```

### `TreeSet`: –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –º–Ω–æ–∂–µ—Å—Ç–≤–æ (RB‚Äëtree)
- **–ò–¥–µ—è.** –ü–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ `TreeMap` (–∫—Ä–∞—Å–Ω–æ‚Äë—á—ë—Ä–Ω–æ–µ –¥–µ—Ä–µ–≤–æ). –≠–ª–µ–º–µ–Ω—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è **–≤ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ**. –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—Å—Ç–∞–≤–∫–∏/–ø–æ–∏—Å–∫–∞/—É–¥–∞–ª–µ–Ω–∏—è ‚Äî `O(log n)`.
- **–ü–æ—Ä—è–¥–æ–∫.** –ó–∞–¥–∞—ë—Ç—Å—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –ø–æ—Ä—è–¥–∫–æ–º (`Comparable`) –∏–ª–∏ –≤–Ω–µ—à–Ω–∏–º `Comparator` –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ.
- **`null`.** TreeSet –Ω–µ –¥–æ–ø—É—Å–∫–∞–µ—Ç null —ç–ª–µ–º–µ–Ω—Ç—ã. –î–æ–ø—É—Å–∫–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∑–Ω–∞—á–µ–Ω–∏—è, —Å—Ä–∞–≤–Ω–∏–º—ã–µ –º–µ–∂–¥—É —Å–æ–±–æ–π –∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã–µ —Å –ø–æ—Ä—è–¥–∫–æ–º –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä–∞. –ò —Ö–æ—Ç—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –≤–æ–∑–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç null, –Ω–æ —ç—Ç–æ –Ω–µ—Ç–∏–ø–∏—á–Ω–æ –∏ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–æ–¥–∏—Ç—å –∫ NPE.
-  –ü–æ–¥—Ö–æ–¥–∏—Ç, –∫–æ–≥–¥–∞ –∫—Ä–∏—Ç–∏—á–Ω—ã —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞, –¥–∏–∞–ø–∞–∑–æ–Ω—ã, –ø–æ–∏—Å–∫ –±–ª–∏–∂–∞–π—à–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤.

```java
private static final Object PRESENT = new Object();

private NavigableMap<E, Object> m;

public boolean add(E e) {
    return m.put(e, PRESENT) == null;
}
```

---

<details>
  <summary>üìí –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∏</summary>
  <p>1) –ü–æ—á–µ–º—É <code>HashSet</code> —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ <code>HashMap</code>? –ö–∞–∫ –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É <code>map.put</code> –ø–æ–Ω—è—Ç—å, –±—ã–ª –ª–∏ —ç–ª–µ–º–µ–Ω—Ç –Ω–æ–≤—ã–º?</p>
  <p>2) –ß–µ–º –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞ <code>LinkedHashSet</code> –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç <code>HashSet</code>? –î–ª—è –∫–∞–∫–∏—Ö –∑–∞–¥–∞—á –Ω—É–∂–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –≤—Å—Ç–∞–≤–∫–∏?</p>
  <p>3) –ü–æ—á–µ–º—É <code>TreeSet</code> –Ω–µ –¥–æ–ø—É—Å–∫–∞–µ—Ç <code>null</code>? –ö–∞–∫ –∑–∞–¥–∞—Ç—å –ø–æ—Ä—è–¥–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏ —á–µ–º –æ—Ç–ª–∏—á–∞—é—Ç—Å—è <code>Comparable</code> –∏ <code>Comparator</code>?</p>
  <p>4) –ü—Ä–∏–≤–µ–¥–∏—Ç–µ –∫–µ–π—Å—ã –≤—ã–±–æ—Ä–∞: <code>HashSet</code> vs <code>LinkedHashSet</code> vs <code>TreeSet</code>. –ß–µ–º –≤—ã —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤—É–µ—Ç–µ—Å—å?</p>
</details>


## 6. –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã `equals()` –∏ `hashCode()` –∏ –∏—Ö –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–∏

---

### –ó–∞—á–µ–º —ç—Ç–æ –≤–æ–æ–±—â–µ –Ω—É–∂–Ω–æ?

–ú–Ω–æ–≥–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ (`HashSet`, `HashMap`, `LinkedHashMap`) –∏—Å–ø–æ–ª—å–∑—É—é—Ç `equals()` –∏ `hashCode()` –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è **—É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ –æ–±—ä–µ–∫—Ç–æ–≤** –∏ –∏—Ö **—Ä–∞–∑–º–µ—â–µ–Ω–∏—è –≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ö** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±–∞–∫–µ—Ç–∞—Ö `HashMap`).

–ù–∞—Ä—É—à–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ —ç—Ç–∏—Ö –º–µ—Ç–æ–¥–æ–≤ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫:

- –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –Ω–∞–π—Ç–∏ –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π "—Ç–æ—á–Ω–æ —Ç–∞–º –ª–µ–∂–∏—Ç"
- –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–º—É –ø–æ–≤–µ–¥–µ–Ω–∏—é `contains`, `remove`, `get`, `put`
- –ø–æ—Ç–µ—Ä–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã –≤ –æ–¥–Ω–æ–º –±–∞–∫–µ—Ç–µ)

---

### üìê –ö–æ–Ω—Ç—Ä–∞–∫—Ç `equals(Object o)`

```java
public class SomeObject {
    private final int id;
    private int count;
    
    public SomeObject(int id, int count) {
        this.id = id;
        this.count = count;
    }
    
    public int getId() {
        return id;
}

@Override
public boolean equals(Object o) {
    if (this == o) {
        return true;                     // —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ —Å—Å—ã–ª–∫–µ
    }
    if (!(o instanceof SomeObject)) {
        return false;   // –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞
    }
    SomeObject other = (SomeObject) o;
    
    return this.id == other.id && this.count == other.count;               // —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–ª–µ–π
}
```

–ú–µ—Ç–æ–¥ `equals()` **–¥–æ–ª–∂–µ–Ω** –±—ã—Ç—å:

| –°–≤–æ–π—Å—Ç–≤–æ       | –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ                                       |
|----------------|--------------------------------------------------|
| **–†–µ—Ñ–ª–µ–∫—Å–∏–≤–Ω–æ—Å—Ç—å** | `x.equals(x)` ‚Äî –¥–æ–ª–∂–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å `true`         |
| **–°–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ—Å—Ç—å** | `x.equals(y)` ‚áî `y.equals(x)`                    |
| **–¢—Ä–∞–Ω–∑–∏—Ç–∏–≤–Ω–æ—Å—Ç—å** | `x.equals(y)` –∏ `y.equals(z)` ‚áí `x.equals(z)`   |
| **–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å** | –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –≤—ã–∑–æ–≤—ã –ø—Ä–∏ –Ω–µ–∏–∑–º–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö ‚Äî –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç |
| **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å null** | `x.equals(null)` ‚Äî –¥–æ–ª–∂–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å `false`     |

---

### üìå –ö–æ–Ω—Ç—Ä–∞–∫—Ç `hashCode()`

```java
@Override
public int hashCode() {
    return Objects.hash(id);
}
```

> üí° –ö–ª—é—á–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å ¬´—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–º–∏¬ª –ø–æ –ø–æ–ª—è–º, –≤–ª–∏—è—é—â–∏–º –Ω–∞ hashCode, –Ω–∞ –≤—Ä–µ–º—è –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è –≤ Map. –ò–Ω–∞—á–µ –ø–æ–∏—Å–∫/—É–¥–∞–ª–µ–Ω–∏–µ –ø–µ—Ä–µ—Å—Ç–∞–Ω—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

–ú–µ—Ç–æ–¥ `hashCode()` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω** —Å `equals()`:

```text
–µ—Å–ª–∏ x.equals(y) == true, —Ç–æ x.hashCode() == y.hashCode()
```

> üí° –û–±—Ä–∞—Ç–Ω–æ–µ **–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ**: –¥–≤–∞ –æ–±—ä–µ–∫—Ç–∞ –º–æ–≥—É—Ç –∏–º–µ—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π `hashCode`, –Ω–æ –±—ã—Ç—å `!equals`.

–¢–∞–∫–∂–µ:

- `hashCode()` –¥–æ–ª–∂–µ–Ω **–≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ –∑–Ω–∞—á–µ–Ω–∏–µ** –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –≤—ã–∑–æ–≤–∞—Ö, –µ—Å–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å.
- –†–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ `hashCode` –≤–∞–∂–Ω–æ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ `HashMap`.

---

> ‚ùó –í–∞–∂–Ω–æ: –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏–ª `equals()` ‚Äî –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏ –∏ `hashCode()`

---

### ‚úÖ –ü—Ä–∏–º–µ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

```java
public class Grade {
    private long studentId;
    private int score; // 0..100

    @Override
    public int hashCode() {
        int result = score;
        result = 31 * result + Long.hashCode(studentId);
        return result;
    }
}
```

–≤–º–µ—Å—Ç–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–µ–ª–∞ –º–µ—Ç–æ–¥–∞ `hashCode()` –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–π –º–µ—Ç–æ–¥ `Objects.hash()`:

```java
@Override
public int hashCode() {
    return Objects.hash(score, studentId);
}
```

---

### üìê –†–µ–∞–ª–∏–∑–∞—Ü–∏—è `Objects.hash`

```java
public static int hash(Object... values) {
    return Arrays.hashCode(values);
}

public static int hashCode(Object[] a) {
    if (a == null) return 0;
    int result = 1;
    for (Object element : a)
        result = 31 * result + Objects.hashCode(element);
    return result;
}
```

---

### üí• –ß—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ –Ω–∞—Ä—É—à–∏—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç equals/hashCode?

```java
public class Grade {
    private final long studentId;
    private final int score;

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (!(o instanceof Grade)) return false;
        Grade other = (Grade) o;
        return studentId == other.studentId && score == other.score;
    }

    // ‚ùå –ù–∞—Ä—É—à–∞–µ–º –∫–æ–Ω—Ç—Ä–∞–∫—Ç: hashCode –∑–∞–≤–∏—Å–∏—Ç —Ç–æ–ª—å–∫–æ –æ—Ç score
    @Override
    public int hashCode() {
        return Integer.hashCode(score); // –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç studentId
    }
}
```

```java
Set<Grade> set = new HashSet<>();
set.add(new Grade(1L, 90));

// –ù–æ–≤—ã–π –æ–±—ä–µ–∫—Ç: —Ç–æ—Ç –∂–µ studentId, —Ç–æ—Ç –∂–µ score ‚Üí equals() –≤–µ—Ä–Ω—ë—Ç true
// hashCode –∑–∞–≤–∏—Å–∏—Ç —Ç–æ–ª—å–∫–æ –æ—Ç score ‚Äî —Ç–æ –µ—Å—Ç—å —Ö–µ—à–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç
set.contains(new Grade(1L, 90)); // ‚úÖ true

// –¢–µ–ø–µ—Ä—å ‚Äî —Å–æ–∑–¥–∞—ë–º –æ–±—ä–µ–∫—Ç —Å –¥—Ä—É–≥–∏–º studentId, –Ω–æ —Ç–µ–º –∂–µ score
// hashCode —Ç–æ—Ç –∂–µ ‚Üí –ø–æ–ø–∞–¥—ë—Ç –≤ —Ç–æ—Ç –∂–µ –±–∞–∫–µ—Ç
// equals() –≤–µ—Ä–Ω—ë—Ç false ‚Üí –Ω–µ –Ω–∞–π–¥–µ–Ω
set.contains(new Grade(2L, 90)); // ‚ùå false
```

> üí° –ü—Ä–∏—á–∏–Ω–∞: –æ–±–∞ –æ–±—ä–µ–∫—Ç–∞ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –±–∞–∫–µ—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ `hashCode()` –∑–∞–≤–∏—Å–∏—Ç —Ç–æ–ª—å–∫–æ –æ—Ç score, –Ω–æ `equals()` —Ä–∞–∑–ª–∏—á–∞–µ—Ç `studentId`, –∏ –ø–æ—ç—Ç–æ–º—É `contains()` –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ.

---

## –ö–∞–∫ –∫–æ–Ω—Ç—Ä–∞–∫—Ç equals/hashCode –≤–ª–∏—è–µ—Ç –Ω–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–∏:

### `List#hashCode()`

```java
int hashCode = 1;
for (E e : list)
    hashCode = 31 * hashCode + (e == null ? 0 : e.hashCode());
```

üî∏ –ü–æ—Ä—è–¥–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ!  
üî∏ –î–≤–∞ `List` —Ä–∞–≤–Ω—ã (`equals`), –µ—Å–ª–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç **–æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–º –ø–æ—Ä—è–¥–∫–µ**.

---

### `Set#hashCode()`

```java
// hash = —Å—É–º–º–∞ —Ö–µ—à–µ–π –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
public int hashCode() {
    int h = 0;
    Iterator<E> i = iterator();
    while (i.hasNext()) {
        E obj = i.next();
        if (obj != null)
            h += obj.hashCode();
    }
    return h;
}
```

üî∏ –ü–æ—Ä—è–¥–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ **–Ω–µ–≤–∞–∂–µ–Ω**  
üî∏ –ì–ª–∞–≤–Ω–æ–µ ‚Äî —Å–æ—Å—Ç–∞–≤ –º–Ω–æ–∂–µ—Å—Ç–≤–∞

---

<details>
  <summary>üìí –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∏</summary>
  <p>1) –ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç ¬´—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å equals –∏ hashCode¬ª? –ü—Ä–∏–≤–µ–¥–∏—Ç–µ –ø—Ä–∏–º–µ—Ä –Ω–∞—Ä—É—à–µ–Ω–∏—è.</p>
  <p>2) –ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –æ–±–∞ –º–µ—Ç–æ–¥–∞, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω?</p>
  <p>3) –ß–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è <code>hashCode</code> –¥–ª—è <code>List</code> –∏ <code>Set</code>?</p>
  <p>4) –ö–∞–∫–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ –¥–æ–ª–∂–µ–Ω —Å–æ–±–ª—é–¥–∞—Ç—å <code>equals()</code>?</p>
  <p>5) –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç, –µ—Å–ª–∏ <code>hashCode()</code> –º–µ–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø–æ–º–µ—â–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ –≤ <code>HashMap</code>?</p>
</details>

## 7. –ù–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤ Java

### üìå –ß—Ç–æ —Ç–∞–∫–æ–µ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏?

–≠—Ç–æ –∫–æ–ª–ª–µ–∫—Ü–∏–∏, **—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω–∏—Ç—å**: –Ω–µ–ª—å–∑—è –¥–æ–±–∞–≤–∏—Ç—å, —É–¥–∞–ª–∏—Ç—å –∏–ª–∏ –∑–∞–º–µ–Ω–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç. –ü–æ–ø—ã—Ç–∫–∞ –∏–∑–º–µ–Ω–∏—Ç—å —Ç–∞–∫—É—é –∫–æ–ª–ª–µ–∫—Ü–∏—é –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ `UnsupportedOperationException`.

---

### ‚úÖ –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—É—é –∫–æ–ª–ª–µ–∫—Ü–∏—é

–° JDK 9 –ø–æ—è–≤–∏–ª–∏—Å—å —É–¥–æ–±–Ω—ã–µ —Ñ–∞–±—Ä–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã:

```java
List<String> list = List.of("a", "b", "c");
Set<Integer> set = Set.of(1, 2, 3);
Map<Integer, String> map = Map.of(
    1, "one",
    2, "two",
    3, "three"
);
```

- `Set.of(...)` –Ω–µ –¥–æ–ø—É—Å–∫–∞–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ ‚Äî –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ø—ã—Ç–∫–µ –¥–æ–±–∞–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —ç–ª–µ–º–µ–Ω—Ç –±—Ä–æ—Å–∞–µ—Ç `IllegalArgumentException`.
- `Map.of(...)` –Ω–µ –¥–æ–ø—É—Å–∫–∞–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –∫–ª—é—á–µ–π ‚Äî –ø—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ –∫–ª—é—á–µ–π –±—É–¥–µ—Ç –≤—ã–±—Ä–æ—à–µ–Ω `IllegalArgumentException`.
- `Map.of(k1, v1, ..., k10, v10)` –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ 10 –ø–∞—Ä–∞–º–∏; –¥–ª—è –±–æ–ª—å—à–µ–≥–æ —á–∏—Å–ª–∞ –ø–∞—Ä –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `Map.ofEntries(...)`.
- –≠—Ç–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã: –Ω–µ–∏–∑–º–µ–Ω—è–µ–º–æ—Å—Ç—å –Ω–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –Ω–∞ –∏–∑–º–µ–Ω—è–µ–º—ã–µ –æ–±—ä–µ–∫—Ç—ã –≤–Ω—É—Ç—Ä–∏.
- –≠—Ç–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ **–Ω–µ –¥–æ–ø—É—Å–∫–∞—é—Ç `null`** –∫–∞–∫ —ç–ª–µ–º–µ–Ω—Ç –∏–ª–∏ –∫–ª—é—á

---

### üî• –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å?

```java
List<Integer> list = List.of(1, 2, 3);
list.add(4); // ‚ùå UnsupportedOperationException

Set<Integer> set = Set.of(1, 2, 3);
set.add(4); // ‚ùå UnsupportedOperationException

Map<Integer, String> map = Map.of(
    1, "one", 2, "two"
);
map.put(3, "three"); // ‚ùå UnsupportedOperationException
```

---

### üß± –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–Ω—É—Ç—Ä–∏?

```java
static <E> List<E> of() {
   return (List<E>) ImmutableCollections.EMPTY_LIST;
}

static <E> Set<E> of() {
   return (Set<E>) ImmutableCollections.EMPTY_SET;
}

static <K, V> Map<K, V> of(K k1, V v1) {
   return new ImmutableCollections.Map1<>(k1, v1);
}
```

> üí° JDK –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã `ImmutableCollections` ‚Äî —É –∫–∞–∂–¥–æ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (`Map1`, `MapN`) –∂–µ—Å—Ç–∫–æ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ.

---

### üß∞ –ì–¥–µ —ç—Ç–æ –ø–æ–ª–µ–∑–Ω–æ?

- –ö–æ–Ω—Å—Ç–∞–Ω—Ç–Ω—ã–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏, enum-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **Defensive copies** ‚Äî –∑–∞—â–∏—Ç–∞ –æ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏–∑–≤–Ω–µ:

```java
class Config {
    private final List<String> tags;

    public Config(List<String> tags) {
        this.tags = List.copyOf(tags); // –∑–∞—â–∏—Ç–Ω–∞—è –∫–æ–ø–∏—è
    }

    public List<String> getTags() {
        return tags;
    }
}
```

- –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç –∫–æ–ª–ª–µ–∫—Ü–∏–π: –≤—ã–∑—ã–≤–∞—é—â–∏–π –Ω–µ —Å–º–æ–∂–µ—Ç –∏—Ö –∏–∑–º–µ–Ω–∏—Ç—å
- –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∏ —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã (immutability –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

---

### üß± –ö–∞–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∫–æ–ª–ª–µ–∫—Ü–∏—é —Å–¥–µ–ª–∞—Ç—å –Ω–µ–∏–∑–º–µ–Ω—è–µ–º–æ–π`:

```java
List<String> mutable = new ArrayList<>(List.of("a", "b"));
List<String> readonly = Collections.unmodifiableList(mutable);
```

- `readonly` –Ω–µ–ª—å–∑—è –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–ø—Ä—è–º—É—é
- **–Ω–æ `mutable` –≤—Å—ë –µ—â—ë –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å**, –∏ —ç—Ç–æ –æ—Ç—Ä–∞–∑–∏—Ç—Å—è –≤ `readonly`.
- "–ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º" —Ç–∞–∫–∏–µ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ —Ö—Ä–∞–Ω—è—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é –∫–æ–ª–ª–µ–∫—Ü–∏—é, –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–∞ –¥–µ–ª–µ–≥–∏—Ä—É—é—Ç –≤—ã–∑–æ–≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏, –∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–∏–¥–∞—é—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ.

```java
mutable.set(0, "x"); // ‚úÖ –¥–æ–ø—É—Å—Ç–∏–º–æ
System.out.println(readonly.get(0)); // x ‚Äî –∏–∑–º–µ–Ω–∏–ª–æ—Å—å, —Ö–æ—Ç—è readonly
```

üí° –§–∞–±—Ä–∏–∫–∏ `List.of(...)` —Å–æ–∑–¥–∞—é—Ç –ø–æ-–Ω–∞—Å—Ç–æ—è—â–µ–º—É –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ ‚Äî –±–µ–∑ –æ–±—ë—Ä—Ç–∫–∏ –≤–æ–∫—Ä—É–≥ –∏–∑–º–µ–Ω—è–µ–º–æ–≥–æ —Å–ø–∏—Å–∫–∞.

---

<details>
  <summary>üìí –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∏</summary>
  <p>1) –í —á—ë–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É <code>List.of(...)</code> –∏ <code>Collections.unmodifiableList(...)</code>?</p>
  <p>2) –ü–æ—á–µ–º—É –Ω–µ–ª—å–∑—è –ø–æ–ª–æ–∂–∏—Ç—å <code>null</code> –≤ <code>Set.of(...)</code>?</p>
  <p>3) –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ <code>map.put(...)</code> –≤ <code>Map.of(...)</code>?</p>
  <p>4) –ö–æ–≥–¥–∞ —Å—Ç–æ–∏—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å <code>List.copyOf(...)</code> –≤–º–µ—Å—Ç–æ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏?</p>
</details>

## 8. –ò—Ç–µ—Ä–∞—Ü–∏—è –∏ fail-fast –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–π

---

### üìå –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Iterable<T>`

```java
public interface Iterable<T> {
    Iterator<T> iterator();
}
```

–ï—Å–ª–∏ –∫–ª–∞—Å—Å —Ä–µ–∞–ª–∏–∑—É–µ—Ç `Iterable`, –µ–≥–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ `for-each`:

```java
for (String s : someIterable) {
    System.out.println(s);
}
```

---

### üîÑ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Iterator<T>`

```java
public interface Iterator<E> {
    boolean hasNext();
    E next();
    void remove(); // —É–¥–∞–ª—è–µ—Ç —ç–ª–µ–º–µ–Ω—Ç, –≤–æ–∑–≤—Ä–∞—â—ë–Ω–Ω—ã–π –ø–æ—Å–ª–µ–¥–Ω–∏–º next()
    void forEachRemaining(Consumer<? super E> action);
}
```

–ò—Ç–µ—Ä–∞—Ç–æ—Ä –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±–æ–π—Ç–∏ —ç–ª–µ–º–µ–Ω—Ç—ã **–±–µ–∑ –∑–Ω–∞–Ω–∏—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã** –∫–æ–ª–ª–µ–∫—Ü–∏–∏.

---

### üì• –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```java
void printItems(Iterable<?> items) {
    Iterator<?> iterator = items.iterator();
    while (iterator.hasNext()) {
        Object item = iterator.next();
        System.out.println("item = " + item);
    }
}
```

–∏–ª–∏ —á–µ—Ä–µ–∑ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–π —Å–∞—Ö–∞—Ä:

```java
for (Object item : items) {
    System.out.println("item = " + item);
}
```

---

### ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–∏ –æ–±—Ö–æ–¥–µ

```java
static void removeEven(List<Integer> numbers) {
    for (var number : numbers) {
        if (number % 2 == 0) {
            numbers.remove(number); // ‚ùå ConcurrentModificationException
        }
    }
}
```

–ü–æ—á–µ–º—É –ø–∞–¥–∞–µ—Ç? –ü–æ—Ç–æ–º—É —á—Ç–æ **–º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `Iterator`** –Ω–∞—Ä—É—à–∞–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞ ‚Äî —ç—Ç–æ –∏ –µ—Å—Ç—å **fail-fast –ø–æ–≤–µ–¥–µ–Ω–∏–µ**.

---

### üö® Fail-fast: `ConcurrentModificationException`

```java
List<Integer> list = new ArrayList<>(List.of(1, 2, 3, 4));
for (Integer x : list) {
    if (x % 2 == 0) list.remove(x);
}
```

> ‚ùå –í –ø—Ä–∏–º–µ—Ä–µ –≤—ã—à–µ –ø–æ–ª—É—á–∏–º ConcurrentModificationException –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –ø–æ–ª—É—á–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–π —ç–ª–µ–º–µ–Ω—Ç

---

### üß† –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç fail-fast?

–ü—Ä–∏–º–µ—Ä –∏–∑ `AbstractList`:

```java
protected transient int modCount = 0;

private class Itr implements Iterator<E> {
    int expectedModCount = modCount;

    public E next() {
        checkForComodification();
        ...
    }

    final void checkForComodification() {
        if (modCount != expectedModCount)
            throw new ConcurrentModificationException();
    }
}
```

- `modCount` —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ª—é–±–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ–π –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ (`add`, `remove`, `clear`)
- `Iterator` —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç `modCount` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –≤ `expectedModCount`
- –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç ‚Äî –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –∏—Å–∫–ª—é—á–µ–Ω–∏–µ

---

### ‚úÖ –ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —É–¥–∞–ª—è—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã –ø—Ä–∏ –∏—Ç–µ—Ä–∞—Ü–∏–∏

```java
Iterator<Integer> it = numbers.iterator();
while (it.hasNext()) {
    if (it.next() % 2 == 0) {
        it.remove(); // ‚úÖ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
    }
}
```
---

<details>
  <summary>üìí –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∏</summary>
  <p>1) –ó–∞—á–µ–º –Ω—É–∂–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å <code>Iterable</code> –∏ –∫–∞–∫–æ–π –º–µ—Ç–æ–¥ –æ–Ω –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç?</p>
  <p>2) –ß–µ–º <code>Iterator.remove()</code> –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç <code>Collection.remove()</code>?</p>
  <p>3) –ü–æ—á–µ–º—É –≤–æ–∑–Ω–∏–∫–∞–µ—Ç <code>ConcurrentModificationException</code>?</p>
  <p>4) –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º fail-fast –≤–Ω—É—Ç—Ä–∏ <code>AbstractList</code>?</p>
  <p>5) –ü–æ—á–µ–º—É –Ω–µ–ª—å–∑—è –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏—é –≤ <code>for-each</code>?</p>
  <p>6) –ú–æ–∂–Ω–æ –ª–∏ –∏–∑–±–µ–∂–∞—Ç—å <code>ConcurrentModificationException</code>, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å <code>iterator().remove()</code>?</p>
</details>


